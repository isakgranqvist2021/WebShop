/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./Components/Alerts.js":
/*!******************************!*\
  !*** ./Components/Alerts.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nclass Alerts {\r\n    constructor() {\r\n        this.alerts = document.getElementById('alerts');\r\n        this.template = document.getElementById('alert-template');\r\n    }\r\n\r\n    displayAlert(alert) {\r\n        if ('content' in document.createElement('template')) {\r\n            let t = this.template.content.cloneNode(true);\r\n            let newAlert = t.children[0];\r\n\r\n            newAlert.classList.add('alert-' + alert.type);\r\n            newAlert.textContent = alert.message;\r\n            this.alerts.appendChild(newAlert);\r\n            this.addCloseBtn(newAlert);\r\n        }\r\n    }\r\n\r\n    addCloseBtn(parent) {\r\n        let closeBtn = document.createElement('i');\r\n        closeBtn.addEventListener('click', (e) => parent.remove());\r\n        closeBtn.classList.add('fas', 'fa-times');\r\n        parent.appendChild(closeBtn);\r\n    }\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Alerts);\n\n//# sourceURL=webpack://js/./Components/Alerts.js?");

/***/ }),

/***/ "./Components/Clear.js":
/*!*****************************!*\
  !*** ./Components/Clear.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _Alerts__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Alerts */ \"./Components/Alerts.js\");\n\r\n\r\nclass Clear {\r\n    constructor() {\r\n        this.da = new _Alerts__WEBPACK_IMPORTED_MODULE_0__.default();\r\n    }\r\n\r\n    init() {\r\n        const url = new URL(window.location); // everything after ?= in the address bar\r\n\r\n        if (url.searchParams.get('err') != null) {\r\n            this.da.displayAlert({ type: 'danger', message: url.searchParams.get('err') });\r\n        }\r\n\r\n        if (url.searchParams.get('success') != null) {\r\n            this.da.displayAlert({ type: 'success', message: url.searchParams.get('success') });\r\n        }\r\n\r\n        url.searchParams.delete('err');\r\n        url.searchParams.delete('success');\r\n        window.history.pushState({}, '', url);\r\n        // update the address bar so the query parameters isn't visible to the user\r\n    }\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Clear);\n\n//# sourceURL=webpack://js/./Components/Clear.js?");

/***/ }),

/***/ "./Components/Controls.js":
/*!********************************!*\
  !*** ./Components/Controls.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _Products__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Products */ \"./Components/Products.js\");\n\r\n\r\nclass Controls extends _Products__WEBPACK_IMPORTED_MODULE_0__.default {\r\n    constructor() {\r\n        super();\r\n        this.product_collection = new URLSearchParams(window.location.search).get('q');\r\n    }\r\n\r\n    addEventListeners() {\r\n        document.querySelectorAll('.clickable').forEach(btn => {\r\n            btn.addEventListener('click', async (e) => {\r\n                let result = await this.refresh(new URLSearchParams(window.location.search).get('q'), btn.getAttribute('data-page'));\r\n\r\n                this.cC.innerHTML = this.template(result);\r\n                this.addEventListeners();\r\n            });\r\n        });\r\n\r\n        document.querySelector('.select-collection')\r\n            .addEventListener('change', async (e) => {\r\n                this.product_collection = e.target.value;\r\n                let result = await this.refresh(e.target.value, 1);\r\n                this.cC.innerHTML = this.template(result);\r\n                this.addEventListeners();\r\n            });\r\n    }\r\n\r\n    template(injection) {\r\n        return `\r\n        <div class=\"d-flex justify-content-between align-items-center pb-3\">\r\n            <div class=\"select\">\r\n                <select class=\"form-select text-capitalize select-collection\">\r\n                    ${injection.collections.map(collection => collection != this.product_collection\r\n            ? `<option value=\"${collection}\">${collection.replace('_', ' ')}</option>`\r\n            : `<option value=\"${collection}\" selected>${collection.replace('_', ' ')}</option>`)}\r\n                </select>\r\n            </div>\r\n            <div class=\"pagination-top\">\r\n                <ul class=\"pagination\">\r\n                    ${injection.result.hasPrevPage ? `<li class=\"page-item clickable\" data-page=${injection.result.prevPage}><a class=\"page-link\">Previous</a></li>` : '<li class=\"page-item disabled\"><a class=\"page-link\">Previous</a></li>'}\r\n                    ${injection.result.hasPrevPage ? `<li class=\"page-item clickable\" data-page=${injection.result.prevPage}><a class=\"page-link\">${injection.result.prevPage}</a></li>` : ''}\r\n                                                      <li class=\"page-item active\"><a class=\"page-link\">${injection.result.page}</a></li>\r\n                    ${injection.result.hasNextPage ? `<li class=\"page-item clickable\" data-page=${injection.result.nextPage}><a class=\"page-link\">${injection.result.nextPage}</a></li>` : ''}\r\n                    ${injection.result.hasNextPage ? `<li class=\"page-item clickable\" data-page=${injection.result.nextPage}><a class=\"page-link\">Next</a></li>` : '<li class=\"page-item disabled\"><a class=\"page-link\">Next</a></li>'}\r\n                </ul>\r\n            </div>\r\n        </div>`;\r\n    }\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Controls);\n\n//# sourceURL=webpack://js/./Components/Controls.js?");

/***/ }),

/***/ "./Components/Form.js":
/*!****************************!*\
  !*** ./Components/Form.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nclass Form {\r\n    variables() {\r\n        return {\r\n            em: document.getElementById('email'),\r\n            fn: document.getElementById('first_name'),\r\n            ln: document.getElementById('last_name'),\r\n            sb: document.querySelector('.btn-primary'),\r\n            f: document.querySelector('.row.g-3'),\r\n            fd: () => {\r\n                if (sessionStorage.getItem('formData') != null)\r\n                    // only attempt to parse sessionStorage if it's present else an error will be thrown\r\n                    return JSON.parse(sessionStorage.getItem('formData'));\r\n\r\n                return null;\r\n            }\r\n        }\r\n    }\r\n\r\n    init() {\r\n        // save form data that isn't sensetive to reduce the annoyment factor\r\n        // it's super annoying especially on mobile when you click submit and you have to re-enter all the data\r\n\r\n        const { em, fn, ln, sb, f, fd } = this.variables();\r\n        let fdp = fd();\r\n\r\n        if (fdp != null) {\r\n            // if fdp is not equal to null then the user has submitted the form and encounterd an error\r\n            // re-populate the form with from the previous request\r\n            em.value = fdp.em;\r\n            fn.value = fdp.fn;\r\n            ln.value = fdp.ln;\r\n        }\r\n\r\n        sb.addEventListener('click', () => {\r\n\r\n            /* \r\n                if the submit is successful then the server will redirect the user to the /users/account page which will trigger \r\n                the if statement at the end of the function\r\n            */\r\n\r\n            window.sessionStorage.setItem('formData', JSON.stringify({ // write the current form values to sessionStorage\r\n                em: em.value,\r\n                fn: fn.value,\r\n                ln: ln.value\r\n            }));\r\n\r\n            f.submit();\r\n        });\r\n    }\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Form);\n\n//# sourceURL=webpack://js/./Components/Form.js?");

/***/ }),

/***/ "./Components/Product.js":
/*!*******************************!*\
  !*** ./Components/Product.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nclass Product {\r\n    constructor(product) {\r\n        this.product = product;\r\n    }\r\n\r\n    template() {\r\n        if (this.product.variants.length > 0) {\r\n            return `\r\n            <a href=\"/product/${this.product._id}\">\r\n                <span class=\"product-price\">â‚¬${this.product.price}</span>\r\n                <div class=\"product-img\">\r\n                    <img src=\"${this.product.variants[0].img.src}\" alt=\"${this.product.variants[0].img.alt}\">\r\n                </div>\r\n                <div class=\"product-body\">\r\n                    <p class=\"product-title\">${this.product.title}</p>\r\n                </div>\r\n            </a>`;\r\n        }\r\n    }\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Product);\n\n//# sourceURL=webpack://js/./Components/Product.js?");

/***/ }),

/***/ "./Components/Products.js":
/*!********************************!*\
  !*** ./Components/Products.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _Utils_HTTP__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Utils/HTTP */ \"./Utils/HTTP.js\");\n/* harmony import */ var _Product__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Product */ \"./Components/Product.js\");\n\r\n\r\n\r\nclass Products {\r\n    constructor(controls) {\r\n        this.pC = document.querySelector('#app-products');\r\n        this.cC = document.querySelector('#app-controls');\r\n        this.data = null;\r\n        this.controls = controls;\r\n    }\r\n\r\n    async loadProducts(q, p) {\r\n        try {\r\n            const result = await _Utils_HTTP__WEBPACK_IMPORTED_MODULE_0__.default.GET(`/api/products?q=${q}&page=${p}`);\r\n            return Promise.resolve(result);\r\n        } catch (err) {\r\n            return Promise.reject(err);\r\n        }\r\n    }\r\n\r\n    async refresh(q, p) {\r\n        this.data = await this.loadProducts(q, p);\r\n        this.render(this.data.result.docs);\r\n\r\n        let url = new URL(window.location);\r\n        url.searchParams.set('page', p);\r\n        url.searchParams.set('q', q);\r\n\r\n        window.history.pushState({}, '', url);\r\n\r\n        return await Promise.resolve(this.data);\r\n    }\r\n\r\n    async init(q, p) {\r\n        this.data = await this.loadProducts(q, p);\r\n        this.render(this.data.result.docs);\r\n\r\n        this.cC.innerHTML = this.controls.template(this.data);\r\n        this.controls.addEventListeners();\r\n    }\r\n\r\n    render(products) {\r\n        this.pC.innerHTML = products.map(product =>\r\n            new _Product__WEBPACK_IMPORTED_MODULE_1__.default(product).template()).join('');\r\n    }\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Products);\n\n//# sourceURL=webpack://js/./Components/Products.js?");

/***/ }),

/***/ "./Components/Select.js":
/*!******************************!*\
  !*** ./Components/Select.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n// image-picker\r\n\r\nclass Select {\r\n    init() {\r\n        let imagePicker = document.querySelector('.image-picker');\r\n        let selectedImg = document.getElementById('selected-img');\r\n\r\n        if (imagePicker != null && selectedImg != null) {\r\n            let images = Array.from(imagePicker.querySelectorAll('img'));\r\n\r\n            images.forEach(img => {\r\n                img.addEventListener('click', () => selectedImg.src = img.src);\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Select);\r\n\n\n//# sourceURL=webpack://js/./Components/Select.js?");

/***/ }),

/***/ "./Components/Sidenav.js":
/*!*******************************!*\
  !*** ./Components/Sidenav.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nclass Sidenav {\r\n    constructor() {\r\n\r\n    }\r\n\r\n    init() {\r\n        this.nav = document.querySelector('nav');\r\n        this.bars = document.querySelector('.open-sidenav');\r\n\r\n        if (this.bars != null) {\r\n            this.bars.addEventListener('click', (e) => {\r\n                e.stopPropagation();\r\n                this.openSidenav();\r\n            });\r\n        }\r\n\r\n        if (this.nav != null) {\r\n            this.nav.addEventListener('click', (e) =>\r\n                e.stopPropagation());\r\n        }\r\n\r\n        if (document != null) {\r\n            document.addEventListener('click', () => {\r\n                this.bars.classList.remove('isOpen');\r\n                this.nav.classList.remove('isOpen');\r\n            });\r\n        }\r\n    }\r\n\r\n    toggleClass(element, className) {\r\n        element.classList.contains(className) ?\r\n            element.classList.remove(className) :\r\n            element.classList.add(className);\r\n    }\r\n\r\n    openSidenav() {\r\n        if (this.nav != null)\r\n            this.toggleClass(this.nav, 'isOpen');\r\n\r\n\r\n        if (this.bars != null)\r\n            this.toggleClass(this.bars, 'isOpen');\r\n    }\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Sidenav);\n\n//# sourceURL=webpack://js/./Components/Sidenav.js?");

/***/ }),

/***/ "./Components/Slider.js":
/*!******************************!*\
  !*** ./Components/Slider.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nclass Slider {\r\n    init() {\r\n        if (document.querySelector('.splide') != null) {\r\n            new Splide('.splide', {\r\n                type: 'loop',\r\n                perPage: 3,\r\n                perMove: 1,\r\n                pagination: false,\r\n                drag: true,\r\n                breakpoints: {\r\n                    992: {\r\n                        perPage: 2\r\n                    },\r\n                    600: {\r\n                        perPage: 1,\r\n                    }\r\n                }\r\n            }).mount();\r\n        }\r\n    }\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Slider);\n\n//# sourceURL=webpack://js/./Components/Slider.js?");

/***/ }),

/***/ "./Utils/HTTP.js":
/*!***********************!*\
  !*** ./Utils/HTTP.js ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nconst serverAddr = 'http://localhost:3000';\r\n\r\nasync function GET(url) {\r\n    try {\r\n        const response = await fetch(serverAddr + url, {\r\n            method: 'GET',\r\n            headers: { 'Content-Type': 'application/json' }\r\n        });\r\n\r\n        return await response.json();\r\n    } catch (err) {\r\n        Promise.reject(err);\r\n    }\r\n}\r\n\r\nasync function POST() {\r\n\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({ GET, POST });\r\n\r\n\n\n//# sourceURL=webpack://js/./Utils/HTTP.js?");

/***/ }),

/***/ "./main.js":
/*!*****************!*\
  !*** ./main.js ***!
  \*****************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _Components_Clear__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Components/Clear */ \"./Components/Clear.js\");\n/* harmony import */ var _Components_Form__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Components/Form */ \"./Components/Form.js\");\n/* harmony import */ var _Components_Products__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Components/Products */ \"./Components/Products.js\");\n/* harmony import */ var _Components_Select__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Components/Select */ \"./Components/Select.js\");\n/* harmony import */ var _Components_Sidenav__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Components/Sidenav */ \"./Components/Sidenav.js\");\n/* harmony import */ var _Components_Slider__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Components/Slider */ \"./Components/Slider.js\");\n/* harmony import */ var _Components_Controls__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Components/Controls */ \"./Components/Controls.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// gets executed when the document has loaded\r\nwindow.onload = () => {\r\n    new _Components_Clear__WEBPACK_IMPORTED_MODULE_0__.default().init();\r\n    new _Components_Sidenav__WEBPACK_IMPORTED_MODULE_4__.default().init();\r\n\r\n    if (window.location.pathname != '/sign-up') {\r\n        sessionStorage.removeItem('formData');\r\n    }\r\n\r\n    if (window.location.pathname === '/sign-up') {\r\n        console.log('init form saving')\r\n        new _Components_Form__WEBPACK_IMPORTED_MODULE_1__.default().init();\r\n\r\n    } else if (new RegExp(/(\\/product\\/[a-zA-Z0-9].*)/).test(window.location.pathname)) {\r\n        new _Components_Select__WEBPACK_IMPORTED_MODULE_3__.default().init();\r\n        new _Components_Slider__WEBPACK_IMPORTED_MODULE_5__.default().init();\r\n\r\n    } else if (window.location.pathname === '/products') {\r\n        let s = new URLSearchParams(window.location.search);\r\n\r\n        new _Components_Products__WEBPACK_IMPORTED_MODULE_2__.default(new _Components_Controls__WEBPACK_IMPORTED_MODULE_6__.default()).init(\r\n            s.get('q') || 'all',\r\n            s.get('page') || 1\r\n        );\r\n    }\r\n}\n\n//# sourceURL=webpack://js/./main.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./main.js");
/******/ 	
/******/ })()
;