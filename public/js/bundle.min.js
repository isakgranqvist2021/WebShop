(()=>{"use strict";const e=async function(e){try{const t=await fetch("http://localhost:3000"+e,{method:"GET",headers:{"Content-Type":"application/json"}});return await t.json()}catch(e){Promise.reject(e)}};window.onload=()=>{let t=window.location.pathname;console.log(t),(new class{constructor(){this.da=new class{constructor(){this.alerts=document.getElementById("alerts"),this.template=document.getElementById("alert-template")}displayAlert(e){if("content"in document.createElement("template")){let t=this.template.content.cloneNode(!0).children[0];t.classList.add("alert-"+e.type),t.textContent=e.message,this.alerts.appendChild(t),this.addCloseBtn(t)}}addCloseBtn(e){let t=document.createElement("i");t.addEventListener("click",(t=>e.remove())),t.classList.add("fas","fa-times"),e.appendChild(t)}}}init(){const e=new URL(window.location);null!=e.searchParams.get("err")&&this.da.displayAlert({type:"danger",message:e.searchParams.get("err")}),null!=e.searchParams.get("success")&&this.da.displayAlert({type:"success",message:e.searchParams.get("success")}),e.searchParams.delete("err"),e.searchParams.delete("success"),window.history.pushState({},"",e)}}).init(),(new class{constructor(){}init(){this.nav=document.querySelector("nav"),this.bars=document.querySelector(".open-sidenav"),null!=this.bars&&this.bars.addEventListener("click",(e=>{e.stopPropagation(),this.openSidenav()})),null!=this.nav&&this.nav.addEventListener("click",(e=>e.stopPropagation())),null!=document&&document.addEventListener("click",(()=>{this.bars.classList.remove("isOpen"),this.nav.classList.remove("isOpen")}))}toggleClass(e,t){e.classList.contains(t)?e.classList.remove(t):e.classList.add(t)}openSidenav(){null!=this.nav&&this.toggleClass(this.nav,"isOpen"),null!=this.bars&&this.toggleClass(this.bars,"isOpen")}}).init(),"/sign-in"===t?(new class{variables(){return{em:document.getElementById("email"),fn:document.getElementById("first_name"),ln:document.getElementById("last_name"),sb:document.querySelector(".btn-primary"),f:document.querySelector(".row.g-3"),fd:()=>null!=sessionStorage.getItem("formData")?JSON.parse(sessionStorage.getItem("formData")):null}}init(){if("/sign-in"!=window.location.pathname)return sessionStorage.removeItem("formData");const{em:e,fn:t,ln:s,sb:a,f:n,fd:i}=this.variables();let l=i();null!=l&&(e.value=l.em,t.value=l.fn,s.value=l.ln),a.addEventListener("click",(()=>{window.sessionStorage.setItem("formData",JSON.stringify({em:e.value,fn:t.value,ln:s.value})),n.submit()}))}}).init():new RegExp(/(\/product\/[a-zA-Z0-9].*)/).test(t)?((new class{init(){let e=document.querySelector(".image-picker"),t=document.getElementById("selected-img");null!=e&&null!=t&&Array.from(e.querySelectorAll("img")).forEach((e=>{e.addEventListener("click",(()=>t.src=e.src))}))}}).init(),(new class{init(){null!=document.querySelector(".splide")&&new Splide(".splide",{type:"loop",perPage:3,perMove:1,pagination:!1,drag:!0,breakpoints:{992:{perPage:2},600:{perPage:1}}}).mount()}}).init()):"/products"===t&&(new class{constructor(){this.pC=document.querySelector(".products"),this.data=null}async loadProducts(t,s){try{const a=await e(`/api/products?q=${t}&page=${s}`);return Promise.resolve(a)}catch(e){Promise.reject(e)}}async init(){let e=new URLSearchParams(window.location.search),t=[e.get("q")||"all",e.get("page")||1];this.data=await this.loadProducts(...t),this.render(this.data.result.docs.map((e=>this.assemble(e))))}assemble(e){let t=document.createElement("a"),s=document.createElement("span"),a=document.createElement("div"),n=document.createElement("img"),i=document.createElement("div"),l=document.createElement("p");return s.className="product-price",s.textContent=`â‚¬${e.price}`,a.className="product-img",n.src=e.variants[0].img.src,i.className="product-body",l.className="product-title",l.textContent=e.title,t.appendChild(s),a.appendChild(n),t.appendChild(a),i.appendChild(l),t.appendChild(l),t}render(e){e.forEach((e=>{this.pC.appendChild(e)}))}}).init()}})();